I"3§<p>æœ¬ç¯‡é€šè¿‡ä¸€ç§è¶£å‘³åŒ–çš„å½¢å¼æ¥è®²è¿° Java çš„<a href="http://www.itwanger.com/java/2019/11/14/java-jihe.html">é›†åˆ</a>ã€‚</p>

<!--more-->

<h3 id="00æ•…äº‹çš„èµ·æº">00ã€æ•…äº‹çš„èµ·æº</h3>

<p>â€œäºŒå“¥ï¼Œä¸Šä¸€ç¯‡ã€Š<a href="http://www.itwanger.com/java/2019/11/14/java-fanxing.html">æ³›å‹</a>ã€‹çš„åå“æ•ˆæœæ€ä¹ˆæ ·å•Šï¼Ÿâ€ä¸‰å¦¹å¯¹å¥¹æè®®çš„ã€Šæ•™å¦¹å­¦ Javaã€‹ä¸“æ å¾ˆæ˜¯å…³å¿ƒã€‚</p>

<p>â€œæœ‰äººè¯„è®ºè¯´ï¼Œâ€˜äºŒå“¥ä½ æ•²ä»£ç éƒ½æ•²å‡ºå¹»æƒ³äº†å•Šã€‚â€™â€</p>

<p>â€œå‘µå‘µï¼Œè¿™å¥è¯å……æ–¥ç€æ»¡æ»¡çš„è®½åˆºæ„å‘³å•Šã€‚â€ä¸‰å¦¹æœ‰ç‚¹éš¾è¿‡äº†èµ·æ¥ã€‚</p>

<p>â€œä¸è¿‡ï¼Œä¹Ÿæœ‰äººè¯„è®ºè¯´ï¼Œâ€˜å»ºè®®è¿™ä¸ªç³»åˆ—çš„æ–‡ç« å¤šå†™å•Šï¼Œå› ä¸ºæˆ‘èŠ±äº†åŠä¸ªæœˆéƒ½æ²¡çœ‹æ‡‚ã€Š Java ç¼–ç¨‹æ€æƒ³ã€‹ä¸­å…³äºæ³›å‹çš„è®²è§£ï¼Œä½†å†çœ‹å®Œè¿™ç¯‡æ–‡ç« åç»ˆäºèä¼šè´¯é€šäº†ï¼Œæ¯”å¿ƒã€‚â€™â€</p>

<p>â€œäºŒå“¥ï¼Œä½ èƒ½ä¸èƒ½å…ˆè¯´å¥½æ¶ˆæ¯å•Šï¼ŸçœŸæ˜¯çš„ã€‚æˆ‘ä¹Ÿè¦ç»™è¿™ä½æš–å¿ƒçš„è¯»è€…æ¯”å¿ƒäº†ã€‚â€ä¸‰å¦¹è¯´å®Œè¿™å¥è¯å°±åœ¨æˆ‘é¢å‰æ¯”äº†ä¸€ä¸ªå¿ƒï¼Œæˆ‘ç…äº†å¥¹ä¸€çœ¼ï¼Œå‘ç°å¥¹ä¹‹å‰çš„æ„å®¹ä¹Ÿæ— å½±æ— è¸ªäº†ã€‚</p>

<p>â€œé‚£æ¥ä¸‹æ¥ï¼ŒäºŒå“¥è¿˜è¦ç»§ç»­å†™å—ï¼Ÿâ€æˆ‘çœ‹åˆ°äº†ä¸‰å¦¹æ·±æƒ…çš„ç›®å…‰ã€‚</p>

<p>â€œå—¯ï¼Œæˆ‘æƒ³è¯¥å†™é›†åˆäº†ã€‚â€</p>

<p>â€œé‚£å°±è®©æˆ‘ç»§ç»­æ¥æé—®å§ï¼ŒäºŒå“¥ä½ ç»§ç»­æ¥å›ç­”ã€‚â€ä¸‰å¦¹å·²ç»è·ƒè·ƒæ¬²è¯•äº†ã€‚</p>

<h3 id="01äºŒå“¥ä»€ä¹ˆæ˜¯é›†åˆå•Š">01ã€äºŒå“¥ï¼Œä»€ä¹ˆæ˜¯é›†åˆå•Šï¼Ÿ</h3>

<p>ä¸‰å¦¹ï¼Œå¬å“¥æ…¢æ…¢ç»™ä½ è®²å•Šã€‚</p>

<p>JDK 1.2 çš„æ—¶å€™å¼•å…¥äº†é›†åˆçš„æ¦‚å¿µï¼Œç”¨æ¥åŒ…å«ä¸€ç»„æ•°æ®ç»“æ„ã€‚ä¸æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œè¿™äº›æ•°æ®ç»“æ„çš„å­˜å‚¨ç©ºé—´ä¼šéšç€å…ƒç´ å¢åŠ è€ŒåŠ¨æ€å¢åŠ ã€‚å…¶ä¸­ï¼Œæœ‰ä¸€äº›é›†åˆç±»æ”¯æŒæ·»åŠ é‡å¤å…ƒç´ ï¼Œè€Œå¦ä¸€äº›ä¸æ”¯æŒï¼›æœ‰ä¸€äº›æ”¯æŒæ·»åŠ  <code class="highlighter-rouge">null</code> å…ƒç´ ï¼Œè€Œå¦ä¸€äº›ä¸æ”¯æŒã€‚</p>

<p>å¯ä»¥æ ¹æ®ç»§æ‰¿ä½“ç³»å°†é›†åˆåˆ†ä¸ºä¸¤å¤§ç±»ï¼Œä¸€ç±»å®ç°äº† <code class="highlighter-rouge">Collection</code> æ¥å£ï¼ˆè§å›¾ 1ï¼‰ï¼Œå¦ä¸€ç±»å®ç°äº† <code class="highlighter-rouge">Map</code> æ¥å£ï¼ˆè§å›¾ 2ï¼‰ã€‚</p>

<p><img src="http://www.itwanger.com/assets/images/2019/11/java-jihe-jiaomei-1.png" alt="å›¾ 1" /></p>

<p>ä»‹ç»ä¸€ä¸‹å›¾ 1ï¼š</p>

<p>1ï¼‰<code class="highlighter-rouge">Collection</code> æ˜¯æ‰€æœ‰é›†åˆç±»çš„æ ¹æ¥å£ã€‚</p>

<p>2ï¼‰<code class="highlighter-rouge">Set</code> æ¥å£çš„å®ç°ç±»ä¸å…è®¸é‡å¤çš„å…ƒç´ ï¼Œä¾‹å¦‚ <code class="highlighter-rouge">HashSet</code>ã€<code class="highlighter-rouge">LinkedHashSet</code>ã€‚</p>

<p>3ï¼‰<code class="highlighter-rouge">List</code> æ¥å£çš„å®ç°ç±»å…è®¸é‡å¤å…ƒç´ ï¼Œå¯é€šè¿‡ <code class="highlighter-rouge">index</code> è®¿é—®å¯¹åº”ä½ç½®ä¸Šçš„å…ƒç´ ï¼Œä¾‹å¦‚ <code class="highlighter-rouge">LinkedList</code>ã€<code class="highlighter-rouge">ArrayList</code>ã€‚</p>

<p>4ï¼‰<code class="highlighter-rouge">Queue</code> æ¥å£çš„å®ç°ç±»å…è®¸åœ¨é˜Ÿåˆ—çš„å°¾éƒ¨æˆ–è€…å¤´éƒ¨å¢åŠ æˆ–è€…åˆ é™¤å…ƒç´ ï¼Œä¾‹å¦‚ <code class="highlighter-rouge">PriorityQueue</code>ã€‚</p>

<p><img src="http://www.itwanger.com/assets/images/2019/11/java-jihe-jiaomei-2.png" alt="å›¾ 2" /></p>

<p>ä»‹ç»ä¸€ä¸‹å›¾ 2ï¼š</p>

<p>1ï¼‰<code class="highlighter-rouge">HashMap</code> æ˜¯æœ€å¸¸ç”¨çš„ <code class="highlighter-rouge">Map</code>ï¼Œå¯ä»¥æ ¹æ®é”®ç›´æ¥è·å–å¯¹åº”çš„å€¼ï¼Œå®ƒæ ¹æ®é”®çš„ <code class="highlighter-rouge">hashCode</code> å€¼å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥è®¿é—®é€Ÿåº¦éå¸¸å¿«ã€‚<code class="highlighter-rouge">HashMap</code> æœ€å¤šåªå…è®¸ä¸€æ¡è®°å½•çš„é”®ä¸º <code class="highlighter-rouge">null</code> (å¤šæ¡ä¼šè¦†ç›–)ï¼›ä½†å…è®¸å¤šæ¡è®°å½•çš„å€¼ä¸º <code class="highlighter-rouge">null</code>ã€‚</p>

<p>2ï¼‰<code class="highlighter-rouge">TreeMap</code> èƒ½å¤ŸæŠŠå®ƒä¿å­˜çš„è®°å½•æ ¹æ®é”®ï¼ˆä¸å…è®¸é”®çš„å€¼ä¸º <code class="highlighter-rouge">null</code>ï¼‰æ’åºï¼Œé»˜è®¤æ˜¯å‡åºï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ’åºçš„æ¯”è¾ƒå™¨ï¼Œå½“ç”¨è¿­ä»£å™¨ï¼ˆ<code class="highlighter-rouge">Iterator</code>ï¼‰éå† <code class="highlighter-rouge">TreeMap</code> æ—¶ï¼Œå¾—åˆ°çš„è®°å½•æ˜¯æ’è¿‡åºçš„ã€‚</p>

<p>3ï¼‰<code class="highlighter-rouge">Hashtable</code> çš„é”®å’Œå€¼å‡ä¸å…è®¸ä¸º <code class="highlighter-rouge">null</code>ï¼Œæ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å†™ <code class="highlighter-rouge">Hashtable</code>ï¼Œçº¿ç¨‹åŒæ­¥ä¼šæ¶ˆè€—æ‰ä¸€äº›æ€§èƒ½ï¼Œå› æ­¤ <code class="highlighter-rouge">Hashtable</code> åœ¨å†™å…¥æ—¶èŠ±è´¹çš„æ—¶é—´ä¹Ÿä¼šæ¯”è¾ƒå¤šã€‚</p>

<p>4ï¼‰<code class="highlighter-rouge">LinkedHashMap</code> ä¿å­˜äº†è®°å½•çš„æ’å…¥é¡ºåºï¼Œå½“ç”¨è¿­ä»£å™¨ï¼ˆ<code class="highlighter-rouge">Iterator</code>ï¼‰éå† <code class="highlighter-rouge">LinkedHashMap</code> æ—¶ï¼Œå…ˆå¾—åˆ°çš„è®°å½•è‚¯å®šæ˜¯å…ˆæ’å…¥çš„ã€‚é”®å’Œå€¼å‡å…è®¸ä¸º <code class="highlighter-rouge">null</code>ã€‚</p>

<p>æœ‰äº†é›†åˆçš„å¸®åŠ©ï¼Œç¨‹åºå‘˜ä¸å†éœ€è¦äº²è‡ªå®ç°å…ƒç´ çš„æ’åºã€æŸ¥æ‰¾ç­‰åº•å±‚ç®—æ³•äº†ã€‚å¦å¤–ï¼ŒåŸºäºæ•°ç»„å®ç°çš„é›†åˆç±»åœ¨é¢‘ç¹è¯»å–æ—¶æ€§èƒ½æ›´ä½³ï¼Œæ¯”å¦‚è¯´ <code class="highlighter-rouge">ArrayList</code>ï¼›åŸºäºé˜Ÿåˆ—å®ç°çš„é›†åˆç±»åœ¨é¢‘ç¹å¢åŠ ã€æ›´æ–°ã€åˆ é™¤æ•°æ®æ—¶æ•ˆç‡æ›´é«˜ï¼Œæ¯”å¦‚è¯´ <code class="highlighter-rouge">LinkedList</code>ï¼›ç¨‹åºå‘˜æ‰€è¦åšçš„å°±æ˜¯ï¼Œæ ¹æ®ä¸šåŠ¡éœ€è¦é€‰æ‹©é€‚å½“çš„é›†åˆç±»ï¼Œè‡³äºæ€§èƒ½è°ƒä¼˜å˜›ï¼Œå¯ä»¥å¾®ä¿¡æ‰¾äºŒå“¥ã€‚</p>

<h3 id="02äºŒå“¥linkedlist-å’Œ-arraylist-æœ‰ä»€ä¹ˆåŒºåˆ«å•Š">02ã€äºŒå“¥ï¼ŒLinkedList å’Œ ArrayList æœ‰ä»€ä¹ˆåŒºåˆ«å•Šï¼Ÿ</h3>

<p>ä¸‰å¦¹ï¼Œåˆšæå®Œé—®é¢˜å°±æ‰“ç›¹å•Šï¼Œç»§ç»­å¬å“¥ç»™ä½ æ…¢æ…¢è®²å•Šã€‚</p>

<p><strong><code class="highlighter-rouge">LinkedList</code> å…¶å®æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨</strong>ï¼Œæ¥çœ‹æºç ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LinkedList</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span>
<span class="o">{</span>
    <span class="kd">transient</span> <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="cm">/**
     * Pointer to first node.
     * Invariant: (first == null &amp;&amp; last == null) ||
     *            (first.prev == null &amp;&amp; first.item != null)
     */</span>
    <span class="kd">transient</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">first</span><span class="o">;</span>

    <span class="cm">/**
     * Pointer to last node.
     * Invariant: (first == null &amp;&amp; last == null) ||
     *            (last.next == null &amp;&amp; last.item != null)
     */</span>
    <span class="kd">transient</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">last</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="no">E</span> <span class="n">item</span><span class="o">;</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">next</span><span class="o">;</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">prev</span><span class="o">;</span>

        <span class="nc">Node</span><span class="o">(</span><span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">prev</span><span class="o">,</span> <span class="no">E</span> <span class="n">element</span><span class="o">,</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">next</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">item</span> <span class="o">=</span> <span class="n">element</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>1ï¼‰<code class="highlighter-rouge">LinkedList</code> åŒ…å«ä¸€ä¸ªéå¸¸é‡è¦çš„å†…éƒ¨ç±»â€”â€”<code class="highlighter-rouge">Node</code>ã€‚<code class="highlighter-rouge">Node</code> æ˜¯èŠ‚ç‚¹æ‰€å¯¹åº”çš„æ•°æ®ç»“æ„ï¼Œ<code class="highlighter-rouge">item</code> ä¸ºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œ<code class="highlighter-rouge">prev</code> ä¸ºä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œ<code class="highlighter-rouge">next</code> ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹â€”â€”è¿™ä¹Ÿæ­£æ˜¯â€œåŒå‘â€é“¾è¡¨çš„åŸå› ã€‚<code class="highlighter-rouge">first</code> ä¸º <code class="highlighter-rouge">LinkedList</code> çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ<code class="highlighter-rouge">last</code> ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>

<p>2ï¼‰<code class="highlighter-rouge">size</code> æ˜¯ <code class="highlighter-rouge">LinkedList</code> çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚å½“å¾€  <code class="highlighter-rouge">LinkedList</code> æ·»åŠ ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œsize+1ï¼Œåˆ é™¤ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œsize-1ã€‚</p>

<p><strong><code class="highlighter-rouge">ArrayList</code> å…¶å®æ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„</strong>ï¼Œæ¥çœ‹æºç ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span>
<span class="o">{</span>
     <span class="cm">/**
     * The array buffer into which the elements of the ArrayList are stored.
     * The capacity of the ArrayList is the length of this array buffer. Any
     * empty ArrayList with elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA
     * will be expanded to DEFAULT_CAPACITY when the first element is added.
     */</span>
    <span class="kd">transient</span> <span class="nc">Object</span><span class="o">[]</span> <span class="n">elementData</span><span class="o">;</span> <span class="c1">// non-private to simplify nested class access</span>

    <span class="cm">/**
     * The size of the ArrayList (the number of elements it contains).
     *
     * @serial
     */</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>1ï¼‰<code class="highlighter-rouge">elementData</code> æ˜¯ <code class="highlighter-rouge">Object</code> ç±»å‹çš„æ•°ç»„ï¼Œç”¨æ¥ä¿å­˜æ·»åŠ åˆ° <code class="highlighter-rouge">ArrayList</code> ä¸­çš„å…ƒç´ ã€‚å¦‚æœé€šè¿‡é»˜è®¤æ„é€ å‚æ•°åˆ›å»º <code class="highlighter-rouge">ArrayList</code> å¯¹è±¡æ—¶ï¼Œ<code class="highlighter-rouge">elementData</code> çš„é»˜è®¤å¤§å°æ˜¯ 10ã€‚å½“ <code class="highlighter-rouge">ArrayList</code> å®¹é‡ä¸è¶³ä»¥å®¹çº³å…¨éƒ¨å…ƒç´ æ—¶ï¼Œå°±ä¼šé‡æ–°è®¾ç½®å®¹é‡ï¼Œæ–°çš„å®¹é‡ = <code class="highlighter-rouge">åŸå§‹å®¹é‡ + (åŸå§‹å®¹é‡ &gt;&gt; 1)</code>ï¼ˆå‚ç…§ä»¥ä¸‹ä»£ç ï¼‰ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">grow</span><span class="o">(</span><span class="kt">int</span> <span class="n">minCapacity</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// overflow-conscious code</span>
    <span class="kt">int</span> <span class="n">oldCapacity</span> <span class="o">=</span> <span class="n">elementData</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">newCapacity</span> <span class="o">=</span> <span class="n">oldCapacity</span> <span class="o">+</span> <span class="o">(</span><span class="n">oldCapacity</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="o">);</span>
    <span class="n">elementData</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="n">elementData</span><span class="o">,</span> <span class="n">newCapacity</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">&gt;&gt;</code> è¿ç®—ç¬¦è¿˜æ²¡æœ‰é©¾é©­äº†ã€‚ä¸è¿‡ï¼Œé€šè¿‡ä»£ç æµ‹è¯•åçš„ç»“è®ºæ˜¯ï¼Œå½“åŸå§‹å®¹é‡ä¸º 10 çš„æ—¶å€™ï¼Œæ–°çš„å®¹é‡ä¸º 15ï¼›å½“åŸå§‹å®¹é‡ä¸º 20 çš„æ—¶å€™ï¼Œæ–°çš„å®¹é‡ä¸º 30ã€‚</p>

<p>2ï¼‰ <code class="highlighter-rouge">size</code> æ˜¯ <code class="highlighter-rouge">ArrayList</code> çš„å…ƒç´ ä¸ªæ•°ã€‚å½“å¾€  <code class="highlighter-rouge">ArrayList</code> æ·»åŠ ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œsize+1ï¼Œåˆ é™¤ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œsize-1ã€‚</p>

<p>ç”±äº <code class="highlighter-rouge">LinkedList</code> å’Œ <code class="highlighter-rouge">ArrayList</code> åº•å±‚å®ç°çš„ä¸åŒï¼ˆä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼‰ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä¹Ÿå¾ˆä¸€ç›®äº†ç„¶ã€‚</p>

<p><strong>å…³é”®ç‚¹1 ï¼š<code class="highlighter-rouge">LinkedList</code> åœ¨æ·»åŠ ï¼ˆ<code class="highlighter-rouge">add(E e)</code>ï¼‰ã€æ’å…¥ï¼ˆ<code class="highlighter-rouge">add(int index, E element)</code>ï¼‰ã€åˆ é™¤ï¼ˆ<code class="highlighter-rouge">remove(int index)</code>ï¼‰å…ƒç´ çš„æ€§èƒ½ä¸Šè¿œè¶… <code class="highlighter-rouge">ArrayList</code></strong>ã€‚</p>

<p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå…ˆæ¥çœ‹ <code class="highlighter-rouge">ArrayList</code> çš„ç›¸å…³æºç ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ensureCapacityInternal() æ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨ System.arraycopy()</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">add</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ensureCapacityInternal</span><span class="o">(</span><span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>  <span class="c1">// Increments modCount!!</span>
    <span class="n">elementData</span><span class="o">[</span><span class="n">size</span><span class="o">++]</span> <span class="o">=</span> <span class="n">e</span><span class="o">;</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="no">E</span> <span class="n">element</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">arraycopy</span><span class="o">(</span><span class="n">elementData</span><span class="o">,</span> <span class="n">index</span><span class="o">,</span> <span class="n">elementData</span><span class="o">,</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span>
                     <span class="n">size</span> <span class="o">-</span> <span class="n">index</span><span class="o">);</span>
    <span class="n">elementData</span><span class="o">[</span><span class="n">index</span><span class="o">]</span> <span class="o">=</span> <span class="n">element</span><span class="o">;</span>
    <span class="n">size</span><span class="o">++;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="no">E</span> <span class="nf">remove</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
    <span class="no">E</span> <span class="n">oldValue</span> <span class="o">=</span> <span class="n">elementData</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>

    <span class="kt">int</span> <span class="n">numMoved</span> <span class="o">=</span> <span class="n">size</span> <span class="o">-</span> <span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">numMoved</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">arraycopy</span><span class="o">(</span><span class="n">elementData</span><span class="o">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">elementData</span><span class="o">,</span> <span class="n">index</span><span class="o">,</span>
                         <span class="n">numMoved</span><span class="o">);</span>
    <span class="n">elementData</span><span class="o">[--</span><span class="n">size</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">// clear to let GC do its work</span>

    <span class="k">return</span> <span class="n">oldValue</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>è§‚å¯Ÿ <code class="highlighter-rouge">ArrayList</code> çš„æºç ï¼Œå°±èƒ½å¤Ÿå‘ç°ï¼Œ<code class="highlighter-rouge">ArrayList</code> åœ¨æ·»åŠ ã€æ’å…¥ã€åˆ é™¤å…ƒç´ çš„æ—¶å€™ï¼Œä¼šæœ‰æ„æˆ–è€…æ— æ„ï¼ˆæ‰©å®¹ï¼‰çš„è°ƒç”¨ <code class="highlighter-rouge">System.arraycopy(Object src,  int  srcPos, Object dest, int destPos, int length)</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯¹æ€§èƒ½çš„æŸè€—æ˜¯éå¸¸ä¸¥é‡çš„ã€‚</p>

<p>å†æ¥çœ‹ <code class="highlighter-rouge">LinkedList</code> çš„ç›¸å…³æºç ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Links e as last element.
 */</span>
<span class="kt">void</span> <span class="nf">linkLast</span><span class="o">(</span><span class="no">E</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
    <span class="kd">final</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">newNode</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Node</span><span class="o">&lt;&gt;(</span><span class="n">l</span><span class="o">,</span> <span class="n">e</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">last</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">l</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
    <span class="k">else</span>
        <span class="n">l</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">newNode</span><span class="o">;</span>
<span class="o">}</span>
<span class="cm">/**
 * Unlinks non-null node x.
 */</span>
<span class="no">E</span> <span class="nf">unlink</span><span class="o">(</span><span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">prev</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">prev</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="n">next</span><span class="o">;</span>
        <span class="n">x</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">next</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">last</span> <span class="o">=</span> <span class="n">prev</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">next</span><span class="o">.</span><span class="na">prev</span> <span class="o">=</span> <span class="n">prev</span><span class="o">;</span>
        <span class="n">x</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="n">x</span><span class="o">.</span><span class="na">item</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">element</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">LinkedList</code> ä¸å­˜åœ¨æ‰©å®¹çš„é—®é¢˜ï¼Œä¹Ÿä¸éœ€è¦å¯¹åŸæœ‰çš„å…ƒç´ è¿›è¡Œå¤åˆ¶ï¼›åªéœ€è¦æ”¹å˜èŠ‚ç‚¹çš„æ•°æ®å°±å¥½äº†ã€‚</p>

<p><strong>å…³é”®ç‚¹2ï¼š<code class="highlighter-rouge">LinkedList</code> åœ¨æŸ¥æ‰¾å…ƒç´ æ—¶è¦æ…¢äº <code class="highlighter-rouge">ArrayList</code></strong>ã€‚</p>

<p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå…ˆæ¥çœ‹ LinkedList çš„ç›¸å…³æºç ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Returns the (non-null) Node at the specified element index.
 */</span>
<span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="nf">node</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// assert isElementIndex(index);</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="o">(</span><span class="n">size</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="o">))</span> <span class="o">{</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">index</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">index</span><span class="o">;</span> <span class="n">i</span><span class="o">--)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">prev</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>è§‚å¯Ÿ <code class="highlighter-rouge">LinkedList</code> çš„æºç ï¼Œå°±èƒ½å¤Ÿå‘ç°ï¼Œ <code class="highlighter-rouge">LinkedList</code> åœ¨å®šä½ <code class="highlighter-rouge">index</code> çš„æ—¶å€™ä¼šå…ˆåˆ¤æ–­ä½ç½®ï¼ˆæ˜¯åœ¨ 1 / 2 çš„å‰é¢è¿˜æ˜¯åé¢ï¼‰ï¼Œå†ä»å‰å¾€åæˆ–è€…ä»åå¾€å‰æ‰§è¡Œ <code class="highlighter-rouge">for</code> å¾ªç¯ä¾æ¬¡æ‰¾ã€‚</p>

<p>å†æ¥çœ‹ <code class="highlighter-rouge">ArrayList</code> çš„ç›¸å…³æºç ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">"unchecked"</span><span class="o">)</span>
<span class="no">E</span> <span class="nf">elementData</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">(</span><span class="no">E</span><span class="o">)</span> <span class="n">elementData</span><span class="o">[</span><span class="n">index</span><span class="o">];</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">ArrayList</code> ç›´æ¥æ ¹æ® <code class="highlighter-rouge">index</code> ä»æ•°ç»„ä¸­å–å‡ºè¯¥ä½ç½®ä¸Šçš„å…ƒç´ ï¼Œä¸éœ€è¦ <code class="highlighter-rouge">for</code> å¾ªç¯éå†å•Šâ€”â€”è¿™æ ·æ˜¾ç„¶æ›´å¿«ï¼</p>

<h3 id="03äºŒå“¥hashmap-å’Œ-treemap-æœ‰ä»€ä¹ˆåŒºåˆ«å•Š">03ã€äºŒå“¥ï¼ŒHashMap å’Œ TreeMap æœ‰ä»€ä¹ˆåŒºåˆ«å•Šï¼Ÿ</h3>

<p>ä¸‰å¦¹ï¼Œæé—®é¢˜è¶Šæ¥è¶Šæœ‰è‰ºæœ¯äº†å•Šï¼Ÿç»§ç»­å¬å“¥ç»™ä½ æ…¢æ…¢è®²å•Šã€‚</p>

<p><code class="highlighter-rouge">HashMap</code> å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹ï¼Œå…¶é”®æ˜¯ä¸€ä¸ª<a href="http://www.itwanger.com/java/2019/11/08/java-hashmap.html">å“ˆå¸Œç </a>ï¼ˆHash çš„ç›´è¯‘ï¼Œä¹Ÿç§°ä½œæ•£åˆ—ï¼‰ã€‚æ¥çœ‹æºç ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HashMap</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;</span>
<span class="o">{</span>
    <span class="kd">transient</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;[]</span> <span class="n">table</span><span class="o">;</span>
    <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Node</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="kt">int</span> <span class="n">hash</span><span class="o">;</span>
        <span class="kd">final</span> <span class="no">K</span> <span class="n">key</span><span class="o">;</span>
        <span class="no">V</span> <span class="n">value</span><span class="o">;</span>
        <span class="nc">Node</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;</span> <span class="n">next</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nf">HashMap</span><span class="o">(</span><span class="kt">int</span> <span class="n">initialCapacity</span><span class="o">,</span> <span class="kt">float</span> <span class="n">loadFactor</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">loadFactor</span> <span class="o">=</span> <span class="n">loadFactor</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">threshold</span> <span class="o">=</span> <span class="n">tableSizeFor</span><span class="o">(</span><span class="n">initialCapacity</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>1ï¼‰<code class="highlighter-rouge">table</code> æ˜¯ä¸€ä¸ª <code class="highlighter-rouge">Node</code> æ•°ç»„ï¼Œè€Œ <code class="highlighter-rouge">Node</code> æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ï¼ˆåªæœ‰ nextï¼‰ã€‚<code class="highlighter-rouge">HashMap</code> çš„é”®å€¼å¯¹å°±å­˜å‚¨åœ¨ <code class="highlighter-rouge">table</code> æ•°ç»„ä¸­ã€‚</p>

<p>2ï¼‰<code class="highlighter-rouge">loadFactor</code> å°±æ˜¯å¤§åé¼é¼çš„åŠ è½½å› å­ï¼Œé»˜è®¤çš„åŠ è½½å› å­æ˜¯ 0.75, æ®è¯´è¿™æ˜¯åœ¨æ—¶é—´å’Œç©ºé—´æˆæœ¬ä¸Šå¯»æ±‚çš„ä¸€ç§æŠ˜è¡·ã€‚</p>

<p>3ï¼‰<code class="highlighter-rouge">initialCapacity</code> å°±æ˜¯åˆå§‹å®¹é‡ï¼Œé»˜è®¤ä¸º 16ã€‚
ã€€ã€€
4ï¼‰<code class="highlighter-rouge">threshold</code> æ˜¯ <code class="highlighter-rouge">HashMap</code> çš„é˜ˆå€¼â€”â€”åˆ¤æ–­æ˜¯å¦éœ€è¦å¯¹ <code class="highlighter-rouge">HashMap</code> è¿›è¡Œæ‰©å®¹ï¼Œ<code class="highlighter-rouge">threshold</code> çš„å€¼ = å®¹é‡ * åŠ è½½å› å­ï¼Œå½“ <code class="highlighter-rouge">HashMap</code> ä¸­å­˜å‚¨çš„æ•°æ®æ•°é‡è¾¾åˆ° <code class="highlighter-rouge">threshold</code> æ—¶ï¼Œå°±éœ€è¦å°† <code class="highlighter-rouge">HashMap</code> çš„å®¹é‡åŠ å€ã€‚</p>

<p>â€œåˆå§‹å®¹é‡â€ å’Œ â€œåŠ è½½å› å­â€å¯¹ <code class="highlighter-rouge">HashMap</code> çš„æ€§èƒ½å½±å“é¢‡å¤§ã€‚å®¹é‡æ˜¯ <code class="highlighter-rouge">HashMap</code> ä¸­æ¡¶ï¼ˆè§ä¸‹å›¾ï¼‰çš„æ•°é‡ï¼Œåˆå§‹å®¹é‡åªæ˜¯ <code class="highlighter-rouge">HashMap</code> åœ¨åˆ›å»ºæ—¶çš„å®¹é‡ã€‚åŠ è½½å› å­æ˜¯ <code class="highlighter-rouge">HashMap</code> åœ¨å…¶å®¹é‡è‡ªåŠ¨å¢åŠ ä¹‹å‰å¯ä»¥è¾¾åˆ°å¤šæ»¡çš„ä¸€ç§å°ºåº¦ã€‚</p>

<p><img src="http://www.itwanger.com/assets/images/2019/11/java-jihe-jiaomei-3.png" alt="å›¾ 3" /></p>

<p><code class="highlighter-rouge">TreeMap</code> å­˜å‚¨çš„æ˜¯<strong>æœ‰åºçš„</strong>é”®å€¼å¯¹ï¼ŒåŸºäº<strong>çº¢é»‘æ ‘ï¼ˆRed-Black treeï¼‰å®ç°</strong>ã€‚å¯ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™æŒ‡å®šé”®ä½çš„æ’åºæ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçš„è¯å°±æ ¹æ®é”®ä½çš„è‡ªç„¶é¡ºåºè¿›è¡Œæ’åºã€‚æ¥çœ‹æºç ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;</span>
<span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">K</span><span class="o">&gt;</span> <span class="n">comparator</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">transient</span> <span class="nc">Entry</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;</span> <span class="n">root</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="no">RED</span>   <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="no">BLACK</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="kd">static</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Entry</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;</span> <span class="o">{</span>
        <span class="no">K</span> <span class="n">key</span><span class="o">;</span>
        <span class="no">V</span> <span class="n">value</span><span class="o">;</span>
        <span class="nc">Entry</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;</span> <span class="n">left</span><span class="o">;</span>
        <span class="nc">Entry</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;</span> <span class="n">right</span><span class="o">;</span>
        <span class="nc">Entry</span><span class="o">&lt;</span><span class="no">K</span><span class="o">,</span><span class="no">V</span><span class="o">&gt;</span> <span class="n">parent</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">color</span> <span class="o">=</span> <span class="no">BLACK</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>1ï¼‰<code class="highlighter-rouge">root</code> æ˜¯çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ˜¯ä¸€ä¸ª <code class="highlighter-rouge">Entry</code> ç±»å‹ï¼ˆæŒ‰ç…§ key è¿›è¡Œæ’åºï¼‰ï¼ŒåŒ…å«äº† keyï¼ˆé”®ï¼‰ã€valueï¼ˆå€¼ï¼‰ã€leftï¼ˆå·¦è¾¹çš„å­èŠ‚ç‚¹ï¼‰ã€rightï¼ˆå³è¾¹çš„å­èŠ‚ç‚¹ï¼‰ã€parentï¼ˆçˆ¶èŠ‚ç‚¹ï¼‰ã€colorï¼ˆé¢œè‰²ï¼‰ã€‚</p>

<p>2ï¼‰<code class="highlighter-rouge">comparator</code> æ˜¯çº¢é»‘æ ‘çš„æ’åºæ–¹å¼ï¼Œæ˜¯ä¸€ä¸ª <code class="highlighter-rouge">Comparator</code> æ¥å£ç±»å‹ï¼Œè¯¥æ¥å£é‡Œé¢æœ‰ä¸€ä¸ª <code class="highlighter-rouge">compare</code> æ–¹æ³•ï¼Œæœ‰ä¸¤ä¸ªå‚æ•° <code class="highlighter-rouge">T o1</code> å’Œ <code class="highlighter-rouge">T o2</code>ï¼Œæ˜¯æ³›å‹çš„è¡¨ç¤ºæ–¹å¼ï¼Œè¡¨ç¤ºå¾…æ¯”è¾ƒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œè¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•´å½¢ï¼Œ o1å¤§äºo2ï¼Œè¿”å›æ­£æ•´æ•°ï¼› o1ç­‰äºo2ï¼Œè¿”å›0ï¼›o1å°äºo3ï¼Œè¿”å›è´Ÿæ•´æ•°ã€‚</p>

<p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œ<code class="highlighter-rouge">HashMap</code> é€‚ç”¨äºåœ¨ <code class="highlighter-rouge">Map</code> ä¸­æ’å…¥ã€åˆ é™¤å’Œå®šä½å…ƒç´ ï¼›<code class="highlighter-rouge">TreeMap</code> é€‚ç”¨äºæŒ‰è‡ªç„¶é¡ºåºæˆ–è‡ªå®šä¹‰é¡ºåºéå†é”®ï¼ˆkeyï¼‰ã€‚</p>

<h3 id="04äºŒå“¥å†è®²è®²äºŒåˆ†æŸ¥æ‰¾å‘—">04ã€äºŒå“¥ï¼Œå†è®²è®²äºŒåˆ†æŸ¥æ‰¾å‘—ï¼</h3>

<p>ä¸‰å¦¹ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼ŒåŒ…åœ¨æˆ‘èº«ä¸Šã€‚ä¸è¿‡ï¼Œåœ¨è®²ä¹‹å‰ï¼Œä½ èƒ½å…ˆå»ç»™å“¥æ³¡æ¯å’–å•¡å—ï¼Ÿ</p>

<p>é€šå¸¸ï¼Œæˆ‘ä»¬ä»æ•°ç»„ä¸­æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œéœ€è¦å¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œéå†ã€‚ä½†å¦‚æœè¿™ä¸ªæ•°ç»„æ˜¯æ’åºè¿‡çš„ï¼Œå°±å¯ä»¥è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾äº†ã€‚</p>

<p>äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼ï¼š</p>

<p>ç¬¬ä¸€æ­¥ï¼Œå°†æ•°ç»„ä¸­é—´ä½ç½®ä¸Šçš„å…ƒç´ ä¸è¦æŸ¥æ‰¾çš„å¯¹è±¡è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸¤è€…ç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼›å¦åˆ™è¿›è¡Œç¬¬äºŒæ­¥ã€‚</p>

<p>ç¬¬äºŒæ­¥ï¼Œåˆ©ç”¨ä¸­é—´ä½ç½®å°†æ•°ç»„åˆ†å‰²æˆå‰ã€åä¸¤ä¸ªå­é›†ã€‚</p>

<p>ç¬¬ä¸‰æ­¥ï¼Œæ¯”è¾ƒè¦æŸ¥æ‰¾çš„å¯¹è±¡ä¸ä¸­é—´ä½ç½®ä¸Šçš„å…ƒç´ ï¼Œå¦‚æœå‰è€…å¤§äºåè€…ï¼Œåˆ™åœ¨åé¢çš„å­é›†ä¸­æŒ‰ç…§ä¹‹å‰çš„æ–¹å¼è¿›è¡ŒæŸ¥æ‰¾ï¼›å¦åˆ™ï¼Œåœ¨å‰é¢çš„å­é›†ä¸­æŒ‰ç…§ä¹‹å‰çš„æ–¹å¼è¿›è¡ŒæŸ¥æ‰¾ã€‚</p>

<p>è¿™æ ·åšå¯ä»¥å°†æŸ¥æ‰¾èŒƒå›´ç¼©å‡ä¸€åŠï¼Œå¤§å¤§çš„å‡å°‘äº†æŸ¥è¯¢çš„æ¬¡æ•°ã€‚</p>

<p><code class="highlighter-rouge">Collections</code> ç±»çš„ <code class="highlighter-rouge">binarySearch()</code> æ–¹æ³•å®ç°äº†äºŒåˆ†æŸ¥æ‰¾è¿™ä¸ªç®—æ³•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå‰ææ˜¯å…ˆè¦æ’åºï¼Œå¦åˆ™å°†è¿”å› -2ã€‚æºç å¦‚ä¸‹ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span>
<span class="kt">int</span> <span class="nf">indexedBinarySearch</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Comparable</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="no">T</span> <span class="n">key</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">low</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">high</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">()-</span><span class="mi">1</span><span class="o">;</span>

    <span class="k">while</span> <span class="o">(</span><span class="n">low</span> <span class="o">&lt;=</span> <span class="n">high</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="o">(</span><span class="n">low</span> <span class="o">+</span> <span class="n">high</span><span class="o">)</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span><span class="o">;</span>
        <span class="nc">Comparable</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">midVal</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">mid</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">cmp</span> <span class="o">=</span> <span class="n">midVal</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">cmp</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span>
            <span class="n">low</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
        <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">cmp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
            <span class="n">high</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
        <span class="k">else</span>
            <span class="k">return</span> <span class="n">mid</span><span class="o">;</span> <span class="c1">// key found</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="o">-(</span><span class="n">low</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>  <span class="c1">// key not found</span>
<span class="o">}</span>
</code></pre></div></div>

<p>æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="n">list1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"æ²‰"</span><span class="o">);</span>
<span class="n">list1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"é»˜"</span><span class="o">);</span>
<span class="n">list1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"ç‹"</span><span class="o">);</span>
<span class="n">list1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"äºŒ"</span><span class="o">);</span>

<span class="nc">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">list1</span><span class="o">);</span> <span class="c1">// å…ˆè¦æ’åº</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Collections</span><span class="o">.</span><span class="na">binarySearch</span><span class="o">(</span><span class="n">list1</span><span class="o">,</span> <span class="s">"ç‹"</span><span class="o">));</span> <span class="c1">// 2</span>
</code></pre></div></div>

<h3 id="05æ•…äº‹çš„æœªå®Œå¾…ç»­">05ã€æ•…äº‹çš„æœªå®Œå¾…ç»­</h3>

<p>â€œäºŒå“¥ï¼Œç»ˆäºè®²å®Œã€Šé›†åˆã€‹äº†ï¼Œå–å£å’–å•¡å§ï¼â€ä¸‰å¦¹çš„æ€åº¦å¾ˆä½“è´´ã€‚</p>

<p>â€œè°¢è°¢ã€‚â€</p>

<p>â€œäºŒå“¥ï¼Œå¦‚æœè¿™ç¯‡æ–‡ç« ç»§ç»­é­å—åˆ°æ‰¹è¯„ï¼Œä½ ä¼šä¸ä¼šæ°”é¦å•Šï¼Ÿâ€ä¸‰å¦¹çœ¨äº†çœ¨çœ¼ç›ï¼Œç»§ç»­é—®æˆ‘ï¼Œæˆ‘çœ‹åˆ°å¥¹é•¿é•¿çš„ç«æ¯›ï¼ŒçœŸçš„å¾ˆç¾ã€‚</p>

<p>â€œå—¯ï¼Œå¯¹äºä½œè€…æ¥è¯´ï¼Œå½“ç„¶å¸Œæœ›æ–‡ç« èƒ½å¤Ÿå¾—åˆ°æ­£é¢çš„åé¦ˆï¼Œå¦‚æœæ˜¯è´Ÿé¢çš„åé¦ˆï¼Œé‚£ä¹Ÿåœ¨æˆ‘çš„æ„æ–™ä¹‹ä¸­ã€‚â€</p>

<p>â€œä¸ºå•¥ï¼Ÿâ€ä¸‰å¦¹å¾ˆå¥½å¥‡ã€‚</p>

<p>â€œã€Šæ•™å¦¹å­¦ Javaã€‹æ˜¯ä¸€ç§åˆ›æ–°çš„å†™ä½œæ‰‹æ³•ï¼Œå¸‚é¢ä¸Šè¿˜æ²¡æœ‰ï¼Œæ–°é²œã€æœ‰è¶£çš„äº‹ç‰©æ€»éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½è¢«å¤§ä¼—æ¥å—ï¼Œå¦åˆ™ä¹Ÿå°±ä¸å«åˆ›æ–°äº†ã€‚â€</p>

<p>â€œäºŒå“¥ï¼Œä¸ºä½ çš„å‹‡æ°”ç‚¹èµï¼â€çœ‹åˆ°ä¸‰å¦¹å¾ˆä¸ºæˆ‘éª„å‚²çš„æ ·å­ï¼Œæˆ‘çš„å¿ƒé‡Œç››å¼€äº†ä¸€æœµç‰¡ä¸¹èŠ±ã€‚</p>

<p>ä¸Šä¸€ç¯‡ï¼š<a href="http://www.itwanger.com/java/2019/11/14/java-fanxing.html">æ•™å¦¹å­¦ Javaï¼šæ™¦æ¶©éš¾æ‡‚çš„æ³›å‹</a></p>

<p>ä¸‹ä¸€ç¯‡ï¼š<a href="http://www.itwanger.com/java/2019/11/14/java-duoxiancheng.html">æ•™å¦¹å­¦ Javaï¼šéš¾ä»¥é©¾é©­çš„å¤šçº¿ç¨‹</a></p>

<p>è°¢è°¢å¤§å®¶çš„é˜…è¯»ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œå–œæ¬¢å°±éšæ‰‹ç‚¹ä¸ªèµğŸ‘ï¼Œè¿™å°†æ˜¯æˆ‘æœ€å¼ºçš„å†™ä½œåŠ¨åŠ›ã€‚å¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰ç‚¹å¸®åŠ©ï¼Œè¿˜æŒºæœ‰è¶£ï¼Œå°±å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ã€Œ<strong>æ²‰é»˜ç‹äºŒ</strong>ã€ã€‚</p>
:ET