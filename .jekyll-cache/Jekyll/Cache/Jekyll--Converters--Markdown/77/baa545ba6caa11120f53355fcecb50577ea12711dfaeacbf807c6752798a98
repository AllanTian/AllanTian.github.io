I"G
<p>当页面上有表单的时候，为了防止用户等不及服务器端响应重复点击提交按钮向服务器端发送重复请求，我们通常需要在请求提交之前将提交按钮禁用。</p>

<!--more-->

<p>先来看一下页面。</p>

<p><img src="http://www.itwanger.com/assets/images/2019/11/web-jquery-form-disable-submit-1.png" alt="" /></p>

<p>当用户点击提交申请这个按钮时，我们需要将其禁用。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">button.btn-submit</span><span class="dl">"</span><span class="p">,</span> <span class="nx">$form</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="dl">"</span><span class="s2">disabled</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">true</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>一般请求结束会遇到两种情况，一种是 success，一种是 error，如果要在这两个函数中去掉按钮的禁用状态，稍显麻烦。更偷懒的做法是，在禁用按钮后设置一个定时，比如说 3 秒，定时结束后自动取消禁用状态。</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">_submit</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">button.btn-submit</span><span class="dl">"</span><span class="p">,</span> <span class="nx">$form</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="dl">"</span><span class="s2">disabled</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">true</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
	<span class="nx">_submit</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="dl">'</span><span class="s1">disabled</span><span class="dl">'</span><span class="p">);</span>
<span class="p">},</span><span class="mi">3000</span><span class="p">);</span>
</code></pre></div></div>

<p>好了，大功告成，页面级别上的有效措施已经完成。这会在一定程度上降低请求重复提交的可能性。服务器端也需要做好对应的处理。</p>

:ET