I"d†<p>å¯¹äºJava I/Oæ¥è¯´ï¼ŒIæ„å‘³ç€Inputï¼ˆè¾“å…¥ï¼‰ï¼ŒOæ„å‘³ç€Outputï¼ˆè¾“å‡ºï¼‰ã€‚è¯»ä¹¦å†™ä½œå¹¶éæ˜“äº‹ï¼Œè€Œåˆ›å»ºä¸€ä¸ªå¥½çš„I/Oç³»ç»Ÿæ›´æ˜¯ä¸€é¡¹è‰°éš¾çš„ä»»åŠ¡ã€‚</p>

<!--more-->

<p>å¤äººäº‘ï¼šâ€œè¯»ä¹¦ç ´ä¸‡å·ï¼Œä¸‹ç¬”å¦‚æœ‰ç¥â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å¤§é‡çš„é˜…è¯»ï¼Œå†™ä½œçš„æ—¶å€™æ‰èƒ½é£ç”Ÿæ°´èµ·â€”â€”å†™ä½œæ„å‘³ç€è¾“å‡ºï¼ˆæˆ‘çš„çŸ¥è¯†ä¼ æ’­ç»™ä»–äººï¼‰ï¼Œè€Œè¯»ä¹¦æ„å‘³ç€è¾“å…¥ï¼ˆä»ä»–äººçš„çŸ¥è¯†ä¸­æ±²å–è¥å…»ï¼‰ã€‚</p>

<h3 id="01æ•°æ®æµä¹‹å­—èŠ‚ä¸å­—ç¬¦">01ã€æ•°æ®æµä¹‹å­—èŠ‚ä¸å­—ç¬¦</h3>

<p>Javaæ‰€æœ‰çš„I/Oæœºåˆ¶éƒ½æ˜¯åŸºäº<strong>æ•°æ®æµ</strong>è¿›è¡Œçš„è¾“å…¥è¾“å‡ºã€‚æ•°æ®æµå¯åˆ†ä¸ºä¸¤ç§ï¼š</p>

<p>1ï¼‰å­—èŠ‚æµï¼Œæœªç»åŠ å·¥çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ï¼Œæœ€å°çš„æ•°æ®å•å…ƒæ˜¯<strong>å­—èŠ‚</strong>ã€‚</p>

<p>2ï¼‰å­—ç¬¦æµï¼Œç»è¿‡ä¸€å®šç¼–ç å¤„ç†åç¬¦åˆæŸç§æ ¼å¼è§„å®šçš„æ•°æ®ï¼Œæœ€å°çš„æ•°æ®å•å…ƒæ˜¯<strong>å­—ç¬¦</strong>â€”â€”å ç”¨ä¸¤ä¸ªå­—èŠ‚ã€‚</p>

<p><code class="highlighter-rouge">OutputStream</code>å’Œ<code class="highlighter-rouge">InputStream</code>ç”¨æ¥å¤„ç†å­—èŠ‚æµï¼›<code class="highlighter-rouge">Writer</code>å’Œ<code class="highlighter-rouge">Reader</code>ç”¨æ¥å¤„ç†å­—ç¬¦æµï¼›<code class="highlighter-rouge">OutputStreamWriter</code>å¯ä»¥æŠŠ<code class="highlighter-rouge">OutputStream</code>è½¬æ¢ä¸º<code class="highlighter-rouge">Writer</code>ï¼Œ<code class="highlighter-rouge">InputStreamReader</code>å¯ä»¥æŠŠ<code class="highlighter-rouge">InputStream</code>è½¬æ¢ä¸º<code class="highlighter-rouge">Reader</code>ã€‚</p>

<p>Javaçš„è®¾è®¡è€…ä¸ºæ­¤è®¾è®¡äº†ä¼—å¤šçš„ç±»ï¼Œè§ä¸‹å›¾ã€‚</p>

<p><img src="http://www.itwanger.com/assets/images/2019/11/java-io-1.png" alt="" /></p>

<p>çœ‹åˆ°è¿™ä¹ˆå¤šç±»ï¼Œä½ ä¸€å®šæ„Ÿè§‰å¤´æ™•ç›®çœ©ã€‚åæ­£æˆ‘å·²ç»çœ‹å¾—ä¸è€çƒ¦äº†ã€‚æè¿™ä¹ˆå¤šç±»ï¼Œçœ‹èµ·æ¥å¤´çœŸçš„å¤§â€”â€”è¿™ä¹Ÿä»ä¾§é¢è¯´æ˜å®é™…çš„åº”ç”¨åœºæ™¯å„æœ‰å„çš„ä¸åŒâ€”â€”ä½ ä¹Ÿå®Œå…¨ä¸ç”¨æ‹…å¿ƒï¼Œå› ä¸ºå®é™…é¡¹ç›®å½“ä¸­ï¼Œæ ¹æœ¬å°±ä¸å¯èƒ½å…¨ç”¨åˆ°ï¼ˆæˆ‘å°±æ²¡ç”¨è¿‡<code class="highlighter-rouge">SequenceOutputStream</code>ï¼‰ã€‚</p>

<p>æˆ‘å»ºè®®ä½ åœ¨<strong>å­¦ä¹ çš„æ—¶å€™è¦æŒæ¡ä¸€ç§â€œæŒ‘ä¸‰æ‹£å››â€çš„èƒ½åŠ›</strong>â€”â€”å­¦ä¹ è‡ªå·±æ„Ÿå…´è¶£çš„ã€å¿…é¡»æŒæ¡çš„ã€å¯¹èƒ½åŠ›æœ‰æ‰€æå‡çš„çŸ¥è¯†ã€‚åˆ‡ä¸å¯å›«å›µåæ£ï¼Œå¼ºè¿«è‡ªå·±ä»€ä¹ˆéƒ½å­¦ã€‚ä»€ä¹ˆéƒ½å­¦ï¼Œæœ€åçš„ç»“æœå¯èƒ½æ˜¯ä»€ä¹ˆéƒ½ä¸ä¼šã€‚</p>

<p>å­—ç¬¦æµæ˜¯åŸºäºå­—èŠ‚æµçš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸€ä¸‹å­—èŠ‚æµçš„ä¸¤ä¸ªæœ€åŸºç¡€çš„ç±»â€”â€”<code class="highlighter-rouge">OutputStream</code>å’Œ<code class="highlighter-rouge">InputStream</code>ï¼Œå®ƒä»¬æ˜¯å¿…é¡»è¦æŒæ¡çš„ã€‚</p>

<p>1ï¼‰OutputStream</p>

<p><code class="highlighter-rouge">OutputStream</code>æä¾›äº†4ä¸ªéå¸¸æœ‰ç”¨çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ã€‚</p>

<ul>
  <li><code class="highlighter-rouge">public void write(byte b[])</code>ï¼šå°†æ•°ç»„bä¸­çš„å­—èŠ‚å†™åˆ°è¾“å‡ºæµã€‚</li>
  <li><code class="highlighter-rouge">public void write(byte b[], int off, int len)</code>ï¼šå°†æ•°ç»„bçš„ä»åç§»é‡offå¼€å§‹çš„lenä¸ªå­—èŠ‚å†™åˆ°è¾“å‡ºæµã€‚</li>
  <li><code class="highlighter-rouge">public void flush()</code> : å°†æ•°æ®ç¼“å†²åŒºä¸­æ•°æ®å…¨éƒ¨è¾“å‡ºï¼Œå¹¶æ¸…ç©ºç¼“å†²åŒºã€‚</li>
  <li><code class="highlighter-rouge">public void close()</code> : å…³é—­è¾“å‡ºæµå¹¶é‡Šæ”¾ä¸æµç›¸å…³çš„ç³»ç»Ÿèµ„æºã€‚</li>
</ul>

<p>å…¶å­ç±»<code class="highlighter-rouge">ByteArrayOutputStream</code>å’Œ<code class="highlighter-rouge">BufferedOuputStream</code>æœ€ä¸ºå¸¸ç”¨ï¼ˆFileç›¸å…³ç±»æ”¾åœ¨ä¸‹ä¸ªå°èŠ‚ï¼‰ã€‚</p>

<p>â‘ ã€<code class="highlighter-rouge">ByteArrayOutputStream</code>é€šå¸¸ç”¨äºåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªå­—èŠ‚æ•°ç»„ç¼“å†²åŒºï¼Œæ•°æ®è¢«â€œä¸´æ—¶â€æ”¾åœ¨æ­¤ç¼“å†²åŒºä¸­ï¼Œå¹¶ä¸ä¼šè¾“å‡ºåˆ°æ–‡ä»¶æˆ–è€…ç½‘ç»œå¥—æ¥å­—ä¸­â€”â€”å°±å¥½åƒä¸€ä¸ªä¸­è½¬ç«™ï¼Œè´Ÿè´£æŠŠè¾“å…¥æµä¸­çš„æ•°æ®è¯»å…¥åˆ°å†…å­˜ç¼“å†²åŒºä¸­ï¼Œä½ å¯ä»¥è°ƒç”¨å®ƒçš„<code class="highlighter-rouge">toByteArray()</code>æ–¹æ³•æ¥è·å–å­—èŠ‚æ•°ç»„ã€‚</p>

<p>æ¥çœ‹ä¸‹ä¾‹ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">readBytes</span><span class="o">(</span><span class="nc">InputStream</span> <span class="n">in</span><span class="o">,</span> <span class="kt">long</span> <span class="n">length</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
	<span class="nc">ByteArrayOutputStream</span> <span class="n">bo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ByteArrayOutputStream</span><span class="o">();</span>
	<span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
	<span class="kt">int</span> <span class="n">read</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
	<span class="k">while</span> <span class="o">(</span><span class="n">read</span> <span class="o">&lt;</span> <span class="n">length</span><span class="o">)</span> <span class="o">{</span>
		<span class="kt">int</span> <span class="n">cur</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buffer</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="mi">1024</span><span class="o">,</span> <span class="n">length</span> <span class="o">-</span> <span class="n">read</span><span class="o">));</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">cur</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">break</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="n">read</span> <span class="o">+=</span> <span class="n">cur</span><span class="o">;</span>
		<span class="n">bo</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buffer</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">cur</span><span class="o">);</span>
	<span class="o">}</span>
	<span class="k">return</span> <span class="n">bo</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">ByteArrayOutputStream</code>çš„è´£ä»»å°±æ˜¯æŠŠ<code class="highlighter-rouge">InputStream</code>ä¸­çš„å­—èŠ‚æµâ€œä¸€å­—ä¸å·®â€çš„è¯»å‡ºæ¥â€”â€”è¿™ä¸ªå·¥å…·æ–¹æ³•å¾ˆé‡è¦ï¼Œå¾ˆé‡è¦ï¼Œå¾ˆé‡è¦â€”â€”å¯ä»¥è§£å†³ç²˜åŒ…çš„é—®é¢˜ã€‚</p>

<p>â‘¡ã€<code class="highlighter-rouge">BufferedOuputStream</code>å®ç°äº†ä¸€ä¸ªç¼“å†²è¾“å‡ºæµï¼Œå¯ä»¥å°†å¾ˆå¤šå°çš„æ•°æ®ç¼“å­˜ä¸ºä¸€ä¸ªå¤§å—çš„æ•°æ®ï¼Œç„¶åä¸€æ¬¡æ€§åœ°è¾“å‡ºåˆ°æ–‡ä»¶æˆ–è€…ç½‘ç»œå¥—æ¥å­—ä¸­â€”â€”è¿™é‡Œçš„â€œç¼“å†²â€å’Œ<code class="highlighter-rouge">ByteArrayOutputStream</code>çš„â€œç¼“å†²â€æœ‰ç€å¾ˆå¤§çš„ä¸åŒâ€”â€”å‰è€…æ˜¯ä¸ºäº†ä¸‹ä¸€æ¬¡çš„ä¸€æ¬¡æ€§è¾“å‡ºï¼Œåè€…å°±æ˜¯å•çº¯çš„ä¸ºäº†ç¼“å†²ï¼Œä¸å­˜åœ¨è¾“å‡ºã€‚</p>

<p>æ¥çœ‹ä¸‹ä¾‹ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
	<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">intToByte</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">));</span>
	<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
	<span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
	<span class="n">out</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">intToByte</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">)</span>
<span class="o">{</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">4</span><span class="o">];</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">data</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
    <span class="o">{</span>
        <span class="n">data</span><span class="o">[</span><span class="mi">3</span><span class="o">-</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)(</span><span class="n">num</span> <span class="o">%</span> <span class="mi">256</span><span class="o">);</span>
        <span class="n">num</span> <span class="o">=</span> <span class="n">num</span> <span class="o">/</span> <span class="mi">256</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">data</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ä½¿ç”¨<code class="highlighter-rouge">BufferedOuputStream</code>çš„æ—¶å€™ï¼Œä¸€å®šè¦è®°å¾—è°ƒç”¨<code class="highlighter-rouge">flush()</code>æ–¹æ³•å°†æ•°æ®ä»ç¼“å†²åŒºä¸­å…¨éƒ¨è¾“å‡ºã€‚ä½¿ç”¨å®Œæ¯•åï¼Œè°ƒç”¨<code class="highlighter-rouge">close()</code>æ–¹æ³•å…³é—­è¾“å‡ºæµï¼Œé‡Šæ”¾ä¸æµç›¸å…³çš„ç³»ç»Ÿèµ„æºã€‚</p>

<p>2ï¼‰InputStream</p>

<p><code class="highlighter-rouge">InputStream</code>ä¹Ÿæä¾›äº†4ä¸ªéå¸¸æœ‰ç”¨çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ã€‚</p>

<ul>
  <li><code class="highlighter-rouge">public int read(byte b[])</code>ï¼šè¯»å–b.lengthä¸ªå­—èŠ‚çš„æ•°æ®æ”¾åˆ°æ•°ç»„bä¸­ï¼Œè¿”å›å€¼æ˜¯è¯»å–çš„å­—èŠ‚æ•°ã€‚</li>
  <li><code class="highlighter-rouge">public int read(byte b[], int off, int len)</code>ï¼šä»è¾“å…¥æµä¸­æœ€å¤šè¯»å–lenä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œå­˜æ”¾åˆ°åç§»é‡ä¸ºoffçš„æ•°ç»„bä¸­ã€‚</li>
  <li><code class="highlighter-rouge">public int available()</code>ï¼šè¿”å›è¾“å…¥æµä¸­å¯ä»¥è¯»å–çš„å­—èŠ‚æ•°ã€‚</li>
  <li><code class="highlighter-rouge">public int close()</code> ï¼šä½¿ç”¨å®Œåï¼Œå¯¹æ‰“å¼€çš„æµè¿›è¡Œå…³é—­ã€‚</li>
</ul>

<p>å…¶å­ç±»<code class="highlighter-rouge">BufferedInputStream</code>ï¼ˆç¼“å†²è¾“å…¥æµï¼‰æœ€ä¸ºå¸¸ç”¨ï¼Œæ•ˆç‡æœ€é«˜ï¼ˆå½“æˆ‘ä»¬ä¸ç¡®å®šè¯»å…¥çš„æ˜¯å¤§æ•°æ®è¿˜æ˜¯å°æ•°æ®ï¼‰ã€‚</p>

<p>æ— ç¼“å†²æµä¸Šçš„æ¯ä¸ªè¯»å–è¯·æ±‚é€šå¸¸ä¼šå¯¼è‡´å¯¹æ“ä½œç³»ç»Ÿçš„è°ƒç”¨ä»¥è¯»å–æ‰€è¯·æ±‚çš„å­—èŠ‚æ•°â€”â€”è¿›è¡Œç³»ç»Ÿè°ƒç”¨çš„å¼€é”€éå¸¸å¤§ã€‚ä½†ç¼“å†²è¾“å…¥æµå°±ä¸ä¸€æ ·äº†ï¼Œå®ƒé€šè¿‡å¯¹å†…éƒ¨ç¼“å†²åŒºæ‰§è¡Œï¼ˆä¾‹å¦‚ï¼‰é«˜è¾¾8kå­—èŠ‚çš„å¤§é‡è¯»å–ï¼Œç„¶åé’ˆå¯¹ç¼“å†²åŒºçš„å¤§å°å†åˆ†é…å­—èŠ‚æ¥å‡å°‘ç³»ç»Ÿè°ƒç”¨çš„å¼€é”€â€”â€”æ€§èƒ½ä¼šæé«˜å¾ˆå¤šã€‚</p>

<p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ã€‚</p>

<p>å…ˆæ¥çœ‹ä¸€ä¸ªè¾…åŠ©æ–¹æ³•<code class="highlighter-rouge">byteToInt</code>ï¼ŒæŠŠå­—èŠ‚è½¬æ¢æˆintã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">byteToInt</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
	<span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
	<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">b</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
		<span class="n">num</span><span class="o">*=</span><span class="mi">256</span><span class="o">;</span>
		<span class="n">num</span><span class="o">+=(</span><span class="n">b</span><span class="o">[</span><span class="n">i</span><span class="o">]+</span><span class="mi">256</span><span class="o">)%</span><span class="mi">256</span><span class="o">;</span>
	<span class="o">}</span>
	<span class="k">return</span> <span class="n">num</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>å†æ¥çœ‹å¦‚ä½•ä»è¾“å…¥æµä¸­ï¼Œæ ¹æ®æŒ‡å®šçš„é•¿åº¦contentLengthæ¥è¯»å–æ•°æ®ã€‚<code class="highlighter-rouge">readBytes()</code>æ–¹æ³•åœ¨ä¹‹å‰å·²ç»æåˆ°è¿‡ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">BufferedInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedInputStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">());</span>

<span class="kt">byte</span><span class="o">[]</span> <span class="n">tmpByte</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">4</span><span class="o">];</span>
<span class="c1">// è¯»å–å››ä¸ªå­—èŠ‚åˆ¤æ–­æ¶ˆæ¯é•¿åº¦</span>
<span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">tmpByte</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>
<span class="c1">// å°†byteè½¬ä¸ºint</span>
<span class="kt">int</span> <span class="n">contentLength</span> <span class="o">=</span> <span class="n">byteToInt</span><span class="o">(</span><span class="n">tmpByte</span><span class="o">);</span>

<span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="k">if</span> <span class="o">(</span><span class="n">contentLength</span> <span class="o">&gt;</span> <span class="n">in</span><span class="o">.</span><span class="na">available</span><span class="o">())</span> <span class="o">{</span>
	<span class="c1">// ä¹‹å‰æåˆ°çš„æ–¹æ³•</span>
	<span class="n">buf</span> <span class="o">=</span> <span class="n">readBytes</span><span class="o">(</span><span class="n">in</span><span class="o">,</span> <span class="n">contentLength</span><span class="o">);</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
	<span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">contentLength</span><span class="o">];</span>
	<span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">contentLength</span><span class="o">);</span>

	<span class="c1">// å‘ç”Ÿç²˜åŒ…äº†</span>
	<span class="k">if</span> <span class="o">(</span><span class="n">in</span><span class="o">.</span><span class="na">available</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>æˆ‘æ•¢ä¿è¯ï¼Œåªè¦ä½ ææ‡‚äº†å­—èŠ‚æµï¼Œå­—ç¬¦æµä¹Ÿå°±ä¸åœ¨è¯ä¸‹â€”â€”æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨æ­¤ç•¥è¿‡å­—ç¬¦æµã€‚</p>

<h3 id="02fileç±»">02ã€Fileç±»</h3>

<p>å‰é¢æˆ‘ä»¬äº†è§£åˆ°ï¼Œæ•°æ®æœ‰ä¸¤ç§æ ¼å¼ï¼šå­—èŠ‚ä¸å­—ç¬¦ã€‚é‚£ä¹ˆè¿™äº›æ•°æ®ä»å“ªé‡Œæ¥ï¼Œåˆå­˜å¾€ä½•å¤„å‘¢ï¼Ÿ</p>

<p>ä¸€ä¸ªä¸»è¦çš„æ–¹å¼å°±æ˜¯ä»ç‰©ç†ç£ç›˜ä¸Šè¿›è¡Œè¯»å–å’Œå­˜å‚¨ï¼Œç£ç›˜çš„å”¯ä¸€æœ€å°æè¿°å°±æ˜¯æ–‡ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸Šå±‚åº”ç”¨ç¨‹åºåªèƒ½é€šè¿‡æ–‡ä»¶æ¥æ“ä½œç£ç›˜ä¸Šçš„æ•°æ®ï¼Œæ–‡ä»¶ä¹Ÿæ˜¯æ“ä½œç³»ç»Ÿå’Œç£ç›˜é©±åŠ¨å™¨äº¤äº’çš„ä¸€ä¸ªæœ€å°å•å…ƒã€‚</p>

<p>åœ¨Javaä¸­ï¼Œé€šå¸¸ç”¨<code class="highlighter-rouge">File</code>ç±»æ¥æ“ä½œæ–‡ä»¶ã€‚å½“ç„¶äº†ï¼ŒFileä¸æ­¢æ˜¯æ–‡ä»¶ï¼Œå®ƒä¹Ÿæ˜¯æ–‡ä»¶å¤¹ï¼ˆç›®å½•ï¼‰ã€‚Fileç±»ä¿å­˜äº†æ–‡ä»¶æˆ–ç›®å½•çš„å„ç§å…ƒæ•°æ®ä¿¡æ¯ï¼ˆæ–‡ä»¶åã€æ–‡ä»¶é•¿åº¦ã€æœ€åä¿®æ”¹æ—¶é—´ã€æ˜¯å¦å¯è¯»ã€å½“å‰æ–‡ä»¶çš„è·¯å¾„åç­‰ç­‰ï¼‰ã€‚</p>

<p>é€šè¿‡Fileç±»ä»¥åŠæ–‡ä»¶è¾“å…¥è¾“å‡ºæµï¼ˆ<code class="highlighter-rouge">FileInputStream</code>ã€<code class="highlighter-rouge">FileOutputStream</code>ï¼‰ï¼Œå¯ä»¥è½»æ¾åœ°åˆ›å»ºã€åˆ é™¤ã€å¤åˆ¶æ–‡ä»¶æˆ–è€…ç›®å½•ã€‚</p>

<p>è¿™é‡Œï¼Œæˆ‘æä¾›ç»™ä½ ä¸€ä¸ªå®ç”¨çš„æ–‡ä»¶å·¥å…·ç±»â€”â€”FileUtilsã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * æ–‡ä»¶æ“ä½œå·¥å…·ç±»
 * å®ç°æ–‡ä»¶çš„åˆ›å»ºã€åˆ é™¤ã€å¤åˆ¶ã€å‹ç¼©ã€è§£å‹ä»¥åŠç›®å½•çš„åˆ›å»ºã€åˆ é™¤ã€å¤åˆ¶ã€å‹ç¼©è§£å‹ç­‰åŠŸèƒ½
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileUtils</span> <span class="kd">extends</span> <span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">commons</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">FileUtils</span> <span class="o">{</span>
	<span class="cm">/**
	 * å¤åˆ¶å•ä¸ªæ–‡ä»¶
	 * @param srcFileName å¾…å¤åˆ¶çš„æ–‡ä»¶å
	 * @param descFileName ç›®æ ‡æ–‡ä»¶å
	 * @param coverlay å¦‚æœç›®æ ‡æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ˜¯å¦è¦†ç›–
	 * @return å¦‚æœå¤åˆ¶æˆåŠŸï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false
	 */</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">copyFileCover</span><span class="o">(</span><span class="nc">String</span> <span class="n">srcFileName</span><span class="o">,</span>
			<span class="nc">String</span> <span class="n">descFileName</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">coverlay</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">File</span> <span class="n">srcFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">srcFileName</span><span class="o">);</span>
		<span class="c1">// åˆ¤æ–­æºæ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
		<span class="k">if</span> <span class="o">(!</span><span class="n">srcFile</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
			<span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"å¤åˆ¶æ–‡ä»¶å¤±è´¥ï¼Œæºæ–‡ä»¶ "</span> <span class="o">+</span> <span class="n">srcFileName</span> <span class="o">+</span> <span class="s">" ä¸å­˜åœ¨!"</span><span class="o">);</span>
			<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="c1">// åˆ¤æ–­æºæ–‡ä»¶æ˜¯å¦æ˜¯åˆæ³•çš„æ–‡ä»¶</span>
		<span class="k">else</span> <span class="nf">if</span> <span class="o">(!</span><span class="n">srcFile</span><span class="o">.</span><span class="na">isFile</span><span class="o">())</span> <span class="o">{</span>
			<span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"å¤åˆ¶æ–‡ä»¶å¤±è´¥ï¼Œ"</span> <span class="o">+</span> <span class="n">srcFileName</span> <span class="o">+</span> <span class="s">" ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶!"</span><span class="o">);</span>
			<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="nc">File</span> <span class="n">descFile</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">descFileName</span><span class="o">);</span>
		<span class="c1">// åˆ¤æ–­ç›®æ ‡æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">descFile</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
			<span class="c1">// å¦‚æœç›®æ ‡æ–‡ä»¶å­˜åœ¨ï¼Œå¹¶ä¸”å…è®¸è¦†ç›–</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">coverlay</span><span class="o">)</span> <span class="o">{</span>
				<span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"ç›®æ ‡æ–‡ä»¶å·²å­˜åœ¨ï¼Œå‡†å¤‡åˆ é™¤!"</span><span class="o">);</span>
				<span class="k">if</span> <span class="o">(!</span><span class="nc">FileUtils</span><span class="o">.</span><span class="na">delFile</span><span class="o">(</span><span class="n">descFileName</span><span class="o">))</span> <span class="o">{</span>
					<span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"åˆ é™¤ç›®æ ‡æ–‡ä»¶ "</span> <span class="o">+</span> <span class="n">descFileName</span> <span class="o">+</span> <span class="s">" å¤±è´¥!"</span><span class="o">);</span>
					<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
				<span class="o">}</span>
			<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
				<span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"å¤åˆ¶æ–‡ä»¶å¤±è´¥ï¼Œç›®æ ‡æ–‡ä»¶ "</span> <span class="o">+</span> <span class="n">descFileName</span> <span class="o">+</span> <span class="s">" å·²å­˜åœ¨!"</span><span class="o">);</span>
				<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">(!</span><span class="n">descFile</span><span class="o">.</span><span class="na">getParentFile</span><span class="o">().</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
				<span class="c1">// å¦‚æœç›®æ ‡æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºç›®å½•</span>
				<span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"ç›®æ ‡æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºç›®å½•!"</span><span class="o">);</span>
				<span class="c1">// åˆ›å»ºç›®æ ‡æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</span>
				<span class="k">if</span> <span class="o">(!</span><span class="n">descFile</span><span class="o">.</span><span class="na">getParentFile</span><span class="o">().</span><span class="na">mkdirs</span><span class="o">())</span> <span class="o">{</span>
					<span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"åˆ›å»ºç›®æ ‡æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•å¤±è´¥!"</span><span class="o">);</span>
					<span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>é™äºç¯‡å¹…ï¼Œå°±ä¸è´´å¤ªå¤šä»£ç äº†ï¼Œéœ€è¦çš„è¯æ‰¾æˆ‘ï¼ˆå¾®ä¿¡ï¼šqing_geeï¼‰è¦ã€‚</p>

<ul>
  <li><code class="highlighter-rouge">public static boolean createFile(String descFileName)</code>ï¼šåˆ›å»ºæ–‡ä»¶ã€‚</li>
  <li><code class="highlighter-rouge">public static boolean createDirectory(String descDirName)</code>ï¼šåˆ›å»ºç›®å½•ã€‚</li>
  <li><code class="highlighter-rouge">public static boolean copyFile(String srcFileName, String descFileName)</code>ï¼šå¤åˆ¶æ–‡ä»¶ã€‚</li>
  <li><code class="highlighter-rouge">public static boolean copyDirectory(String srcDirName, String descDirName)</code>ï¼šå¤åˆ¶ç›®å½•ã€‚</li>
  <li><code class="highlighter-rouge">public static boolean deleteFile(String fileName)</code>ï¼šåˆ é™¤æ–‡ä»¶ã€‚</li>
  <li><code class="highlighter-rouge">public static boolean deleteDirectory(String dirName)</code>ï¼šåˆ é™¤ç›®å½•ã€‚</li>
  <li><code class="highlighter-rouge">public static void writeToFile(String fileName, String content, boolean append)</code>ï¼šå‘æ–‡ä»¶ä¸­å†™å…¥å†…å®¹ã€‚</li>
</ul>

<h3 id="03ç½‘ç»œå¥—æ¥å­—socket">03ã€ç½‘ç»œå¥—æ¥å­—â€”â€”Socket</h3>

<p>è™½ç„¶ç½‘ç»œå¥—æ¥å­—ï¼ˆ<code class="highlighter-rouge">Socket</code>ï¼‰å¹¶ä¸åœ¨java.ioåŒ…ä¸‹ï¼Œä½†å®ƒå’Œè¾“å…¥è¾“å‡ºæµå¯†åˆ‡ç›¸å…³ã€‚<code class="highlighter-rouge">File</code>å’Œ<code class="highlighter-rouge">Socket</code>æ˜¯ä¸¤ç»„ä¸»è¦çš„æ•°æ®ä¼ è¾“æ–¹å¼ã€‚</p>

<p><code class="highlighter-rouge">Socket</code>æ˜¯æè¿°è®¡ç®—æœºä¹‹é—´å®Œæˆç›¸äº’é€šä¿¡çš„ä¸€ç§æŠ½è±¡ã€‚å¯ä»¥æŠŠ <code class="highlighter-rouge">Socket</code>æ¯”ä½œä¸ºä¸¤ä¸ªåŸå¸‚ä¹‹é—´çš„äº¤é€šå·¥å…·ï¼Œæœ‰äº†äº¤é€šå·¥å…·ï¼ˆé«˜é“ã€æ±½è½¦ï¼‰ï¼Œå°±å¯ä»¥åœ¨åŸå¸‚ä¹‹é—´æ¥å›ç©¿æ¢­äº†ã€‚äº¤é€šå·¥å…·æœ‰å¤šç§ï¼Œæ¯ç§äº¤é€šå·¥å…·ä¹Ÿæœ‰ç›¸åº”çš„äº¤é€šè§„åˆ™ã€‚<code class="highlighter-rouge">Socket</code>ä¹Ÿä¸€æ ·ï¼Œä¹Ÿæœ‰å¤šç§ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯åŸºäº<code class="highlighter-rouge">TCP/IP</code>çš„å¥—æ¥å­—â€”â€”ä¸€ç§ç¨³å®šçš„é€šä¿¡åè®®ã€‚</p>

<p><img src="http://www.itwanger.com/assets/images/2019/11/java-io-2.png" alt="" /></p>

<p>å‡è®¾ä¸»æœºAæ˜¯å®¢æˆ·ç«¯ï¼Œä¸»æœºBæ˜¯æœåŠ¡å™¨ç«¯ã€‚å®¢æˆ·ç«¯è¦ä¸æœåŠ¡å™¨ç«¯é€šä¿¡ï¼Œå®¢æˆ·ç«¯é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ª<code class="highlighter-rouge">Socket</code>å®ä¾‹ï¼Œæ“ä½œç³»ç»Ÿå°†ä¸ºè¿™ä¸ª<code class="highlighter-rouge">Socket</code>å®ä¾‹åˆ†é…ä¸€ä¸ªæ²¡æœ‰è¢«ä½¿ç”¨çš„æœ¬åœ°ç«¯å£å·ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—æ•°æ®ç»“æ„ï¼Œç›´åˆ°è¿™ä¸ªè¿æ¥å…³é—­ã€‚</p>

<p>ç¤ºä¾‹å¦‚ä¸‹ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Socket</span><span class="o">(</span><span class="n">serverIp</span><span class="o">,</span> <span class="n">serverPort</span><span class="o">);</span>
<span class="nc">BufferedInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedInputStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">());</span>
<span class="nc">BufferedOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedOutputStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
</code></pre></div></div>

<p>ä¸ä¹‹å¯¹åº”çš„ï¼ŒæœåŠ¡ç«¯éœ€è¦åˆ›å»ºä¸€ä¸ª<code class="highlighter-rouge">ServerSocket</code>å®ä¾‹ï¼Œä¹‹åè°ƒç”¨<code class="highlighter-rouge">accept()</code>æ–¹æ³•è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚å½“ä¸€ä¸ªæ–°çš„è¯·æ±‚åˆ°æ¥æ—¶ï¼Œå°†ä¸ºè¿™ä¸ªè¿æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¥—æ¥å­—æ•°æ®ç»“æ„ã€‚</p>

<p>ç¤ºä¾‹å¦‚ä¸‹ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ServerSocket</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="n">port</span><span class="o">);</span>
<span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
<span class="nc">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedInputStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">());</span>
<span class="nc">OutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedOutputStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">Socket</code>ä¸€æ—¦æ‰“é€šï¼Œå°±å¯ä»¥é€šè¿‡<code class="highlighter-rouge">InputStream</code>å’Œ<code class="highlighter-rouge">OutputStream</code>è¿›è¡Œæ•°æ®ä¼ è¾“äº†ã€‚</p>

<h3 id="04å‹ç¼©">04ã€å‹ç¼©</h3>

<p>Java I/O æ”¯æŒå‹ç¼©æ ¼å¼çš„æ•°æ®æµã€‚åœ¨<code class="highlighter-rouge">Socket</code>é€šä¿¡ä¸­ï¼Œæˆ‘å¸¸ç”¨<code class="highlighter-rouge">GZIPOutputStream</code>å’Œ<code class="highlighter-rouge">GZIPInputStream</code>æ¥å¯¹æ•°æ®æµè¿›è¡Œç®€å•åœ°å‹ç¼©å’Œè§£å‹ã€‚</p>

<p>å‹ç¼©çš„å¥½å¤„å°±åœ¨äºèƒ½å¤Ÿå‡å°ç½‘ç»œä¼ è¾“ä¸­æ•°æ®çš„ä½“ç§¯ã€‚ä»£ç å¦‚ä¸‹ã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * å‹ç¼©è§£å‹
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CompressionUtil</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">compress</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>

		<span class="nc">ByteArrayOutputStream</span> <span class="n">bos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ByteArrayOutputStream</span><span class="o">();</span>
		<span class="kt">byte</span><span class="o">[]</span> <span class="n">result</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
		<span class="nc">GZIPOutputStream</span> <span class="n">zos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GZIPOutputStream</span><span class="o">(</span><span class="n">bos</span><span class="o">);</span>
		<span class="n">zos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
		<span class="k">return</span> <span class="n">result</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">deCompress</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">in</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>

		<span class="nc">ByteArrayOutputStream</span> <span class="n">outStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ByteArrayOutputStream</span><span class="o">();</span>
		<span class="nc">GZIPInputStream</span> <span class="n">inStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GZIPInputStream</span><span class="o">(</span><span class="k">new</span> <span class="nc">ByteArrayInputStream</span><span class="o">(</span><span class="n">in</span><span class="o">));</span>

		<span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
		<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">try</span> <span class="o">{</span>
				<span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">inStream</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
				<span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span>
					<span class="k">break</span><span class="o">;</span>
				<span class="n">outStream</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">size</span><span class="o">);</span>
			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
				<span class="k">break</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">}</span>

		<span class="k">return</span> <span class="n">outStream</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<p>ä¸Šä¸€ç¯‡ï¼š<a href="http://www.itwanger.com/java/2019/11/08/java-annotation.html">Javaæ³¨è§£ï¼ˆAnnotationï¼‰ï¼šè¯·ä¸è¦å°çœ‹æˆ‘ï¼</a></p>

<p>ä¸‹ä¸€ç¯‡ï¼š<a href="http://www.itwanger.com/java/2019/11/09/java-bingfa.html">Javaï¼šå¹¶å‘ä¸æ˜“ï¼Œå…ˆå­¦ä¼šç”¨</a></p>

<p>å¾®ä¿¡æœç´¢ã€Œ<strong>æ²‰é»˜ç‹äºŒ</strong>ã€å…¬ä¼—å·ï¼Œå…³æ³¨åå›å¤ã€Œ<strong>å…è´¹è§†é¢‘</strong>ã€è·å– 500G é«˜è´¨é‡æ•™å­¦è§†é¢‘ï¼ˆ<a href="https://mp.weixin.qq.com/s/GjkEyPW0vgIvuDLYQkBM0A">å·²åˆ†é—¨åˆ«ç±»</a>ï¼‰ã€‚</p>

:ET